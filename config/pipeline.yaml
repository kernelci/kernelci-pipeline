# SPDX-License-Identifier: LGPL-2.1-or-later
#
# Copyright (C) 2021, 2022, 2023 Collabora Limited
# Author: Guillaume Tucker <guillaume.tucker@collabora.com>

# Not directly loaded into the config, only used for YAML aliases in this file
_anchors:

### Device definition templates

  arm64-device: &arm64-device
    arch: arm64
    boot_method: u-boot

  arm-device: &arm-device
    <<: *arm64-device
    arch: arm

  x86_64-device: &x86_64-device
    arch: x86_64
    boot_method: grub
    mach: x86

### Job definition templates

  baseline-job: &baseline-job
    template: baseline.jinja2
    kind: job
    kcidb_test_suite: boot

  kbuild-job: &kbuild-job
    template: kbuild.jinja2
    kind: kbuild
    rules:
      tree:
      - '!android'

  kbuild-clang-17-arm64-job: &kbuild-clang-17-arm64-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}clang-17:arm64-kselftest-kernelci
    params: &kbuild-clang-17-arm64-params
      arch: arm64
      compiler: clang-17
      cross_compile: 'aarch64-linux-gnu-'
      defconfig: defconfig

  kbuild-clang-17-x86-job: &kbuild-clang-17-x86-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}clang-17:x86-kselftest-kernelci
    params: &kbuild-clang-17-x86-params
      arch: x86_64
      compiler: clang-17
      defconfig: x86_64_defconfig

  kbuild-gcc-12-arm64-job: &kbuild-gcc-12-arm64-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:arm64-kselftest-kernelci
    params: &kbuild-gcc-12-arm64-params
      arch: arm64
      compiler: gcc-12
      cross_compile: 'aarch64-linux-gnu-'
      defconfig: defconfig
      fragments:
        - 'lab-setup'
        - 'kselftest'

  kbuild-gcc-12-x86-job: &kbuild-gcc-12-x86-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:x86-kselftest-kernelci
    params: &kbuild-gcc-12-x86-params
      arch: x86_64
      compiler: gcc-12
      defconfig: x86_64_defconfig
      fragments:
        - 'kselftest'

  ltp-job: &ltp-job
    template: ltp.jinja2
    kind: job
    params: &ltp-params
      boot_commands: nfs
      nfsroot: 'https://storage.kernelci.org/images/rootfs/debian/bookworm-ltp/20240313.0/{debarch}'
      skip_install: "true"
      skipfile: skipfile-lkft.yaml
    kcidb_test_suite: ltp
    rules:
      fragments:
        - '!kselftest'

### Scheduler definition helpers

  build-k8s-all: &build-k8s-all
    event: &checkout-event
      channel: node
      kind: checkout
      state: available
    runtime:
      name: k8s-all

  node-event: &node-event-kbuild
    channel: node
    result: pass
    kind: kbuild

### Frequently used rules

  build-only-trees-rules: &build-only-trees-rules
    tree:
    - 'qcom'
    - 'amlogic'
    - 'ardb'
    - 'arnd'
    - 'cip'
    - 'clk'
    - 'efi'
    - 'khilman'
    - 'krzysztof'
    - 'lee-backlight'
    - 'linusw'
    - 'net-next'
    - 'next'
    - 'pm'
    - 'renesas'
    - 'robh'
    - 'rppt'
    - 'sashal-next'
    - 'soc'
    - 'stable'
    - 'tegra'
    - 'thermal'
    - 'tip'
    - 'ulfh'
    - 'vireshk'

api:

  docker-host:
    url: http://172.17.0.1:8001

  staging:
    url: https://staging.kernelci.org:9000

  production:
    url: https://kernelci-api.westus3.cloudapp.azure.com

  k8s-host:
    url: http://kernelci-api:8001


storage:

  docker-host:
    storage_type: ssh
    host: 172.17.0.1
    port: 8022
    base_url: http://172.17.0.1:8002/

  production-azure: &azure-files
    storage_type: azure
    base_url: https://kciapistagingstorage1.file.core.windows.net/
    share: production
    sas_public_token: "?sv=2022-11-02&ss=f&srt=sco&sp=r&se=2026-10-18T13:36:18Z&st=2024-10-17T05:36:18Z&spr=https&sig=xFxYOOh5uXJWeN9I3YKAUvpGGQivo89HKZbD78gcxvc%3D"

  k8s-host:
    storage_type: ssh
    host: kernelci-api-ssh
    port: 8022
    base_url: http://kernelci-api-storage:8002/

  staging:
    storage_type: ssh
    host: staging.kernelci.org
    port: 9022
    base_url: http://storage.staging.kernelci.org/api/

  staging-azure:
    <<: *azure-files
    share: staging

  kci-storage:
    storage_type: backend
    base_url: http://mon.kernelci.org:3000/
    api_url: http://mon.kernelci.org:3000/

runtimes:

  docker:
    lab_type: docker
    env_file: '/home/kernelci/.docker-env'
    user: 'root'  # Docker-in-Docker
    volumes:
      # Note: Absolute paths on the host are required here
      - 'data/ssh/:/home/kernelci/data/ssh'
      - 'data/output/:/home/kernelci/data/output'

  k8s-all:
    lab_type: kubernetes
    context:
      - 'aks-kbuild-medium-1'
      - 'gke_android-kernelci-external_europe-west1-d_kci-eu-west1'
      - 'gke_android-kernelci-external_europe-west4-c_kci-eu-west4'
      - 'gke_android-kernelci-external_us-central1-c_kci-us-central1'
      - 'gke_android-kernelci-external_us-east4-c_kci-big-us-east4'
      - 'gke_android-kernelci-external_us-west1-a_kci-us-west1'

  k8s-gke-eu-west4:
    lab_type: kubernetes
    context: 'gke_android-kernelci-external_europe-west4-c_kci-eu-west4'

  lava-baylibre:
    lab_type: lava
    url: 'https://lava.baylibre.com/'
    notify:
      callback:
        token: kernelci-new-api
    rules:
      tree:
      - kernelci
      - 'mainline'
      - next

  lava-broonie:
    lab_type: lava
    url: 'https://lava.sirena.org.uk/'
    priority_min: 0
    priority_max: 49
    notify:
      callback:
        token: kernelci-new-api-callback
    rules:
      tree:
      - '!android'

  lava-cip:
    lab_type: lava
    url: 'https://lava.ciplatform.org/'
    notify:
      callback:
        token: kernel-ci-new-api

  lava-collabora: &lava-collabora-staging
    lab_type: lava
    url: https://lava.collabora.dev/
    priority_min: 40
    priority_max: 60
    notify:
      callback:
        token: kernelci-api-token-staging

  lava-collabora-staging:
    <<: *lava-collabora-staging
    url: https://staging.lava.collabora.dev/
    notify:
      callback:
        token: kernelci-api-token-lava-staging

  lava-qualcomm:
    lab_type: lava
    url: 'https://lava.infra.foundries.io'
    notify:
      callback:
        token: kernelci-lab-qualcomm

  shell:
    lab_type: shell


jobs:

  # FIXME This will need to be reworked later when the fstests scheduler has
  # been removed
  #
  # fstests:
  #   template: 'fstests.jinja2'
  #   image: 'kernelci/staging-kernelci'

  baseline-arm: *baseline-job
  baseline-arm-broonie: *baseline-job
  baseline-arm-baylibre: *baseline-job
  baseline-arm-mfd: *baseline-job
  baseline-arm64: *baseline-job
  baseline-arm64-android: *baseline-job
  baseline-arm64-broonie: *baseline-job
  baseline-arm64-kcidebug-mediatek: *baseline-job
  baseline-arm64-kcidebug-qualcomm: *baseline-job
  baseline-arm64-mfd: *baseline-job
  baseline-arm64-qualcomm: *baseline-job
  baseline-x86: *baseline-job
  baseline-x86-baylibre: *baseline-job
  baseline-x86-cip: *baseline-job
  baseline-x86-kcidebug-amd: *baseline-job
  baseline-x86-kcidebug-intel: *baseline-job
  baseline-x86-mfd: *baseline-job
  baseline-x86-qualcomm: *baseline-job

  kbuild-clang-17-arm: &kbuild-clang-17-arm-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}clang-17:arm-kselftest-kernelci
    params: &kbuild-clang-17-arm-params
      arch: arm
      compiler: clang-17
      cross_compile: 'arm-linux-gnueabihf-'
      defconfig: multi_v7_defconfig

  kbuild-clang-17-arm-allmodconfig:
    <<: *kbuild-clang-17-arm-job
    params:
      <<: *kbuild-clang-17-arm-params
      defconfig:
        - defconfig
        - allmodconfig
      fragments:
        - 'CONFIG_FRAME_WARN=2048'
    rules:
      tree:
        - 'mainline'
        - 'stable-rc'
        - 'stable'

  kbuild-clang-17-arm-android: &kbuild-clang-17-arm-android-job
    <<: *kbuild-clang-17-arm-job
    params: &kbuild-clang-17-arm-android-params
      <<: *kbuild-clang-17-arm-params
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-clang-17-arm-android-allmodconfig:
    <<: *kbuild-clang-17-arm-android-job
    params:
      <<: *kbuild-clang-17-arm-android-params
      defconfig:
        - imx_v6_v7_defconfig
        - 'allmodconfig'

  kbuild-clang-17-arm-android-imx_v6_v7_defconfig:
    <<: *kbuild-clang-17-arm-android-job
    params:
      <<: *kbuild-clang-17-arm-android-params
      defconfig: imx_v6_v7_defconfig

  kbuild-clang-17-arm-android-multi_v5_defconfig:
    <<: *kbuild-clang-17-arm-android-job
    params:
      <<: *kbuild-clang-17-arm-android-params
      defconfig: multi_v5_defconfig

  kbuild-clang-17-arm-android-omap2plus_defconfig:
    <<: *kbuild-clang-17-arm-android-job
    params:
      <<: *kbuild-clang-17-arm-android-params
      defconfig: omap2plus_defconfig

  kbuild-clang-17-arm-android-vexpress_defconfig:
    <<: *kbuild-clang-17-arm-android-job
    params:
      <<: *kbuild-clang-17-arm-android-params
      defconfig: vexpress_defconfig

  kbuild-clang-17-arm64-allmodconfig:
    <<: *kbuild-clang-17-arm64-job
    params:
      <<: *kbuild-clang-17-arm64-params
      defconfig:
        - defconfig
        - allmodconfig
    rules:
      tree:
        - 'mainline'
        - 'stable-rc'
        - 'stable'

  kbuild-clang-17-arm64-allnoconfig:
    <<: *kbuild-clang-17-arm64-job
    params:
      <<: *kbuild-clang-17-arm64-params
      defconfig:
        - defconfig
        - allnoconfig
    rules:
      tree:
        - 'mainline'

  kbuild-clang-17-arm64-android: &kbuild-clang-17-arm64-android-job
    <<: *kbuild-clang-17-arm64-job
    params: &kbuild-clang-17-arm64-android-params
      <<: *kbuild-clang-17-arm64-params
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-clang-17-arm64-android-allmodconfig:
    <<: *kbuild-clang-17-arm64-android-job
    params:
      <<: *kbuild-clang-17-arm64-android-params
      defconfig:
        - defconfig
        - allmodconfig

  kbuild-clang-17-arm64-android-allnoconfig:
    <<: *kbuild-clang-17-arm64-android-job
    params:
      <<: *kbuild-clang-17-arm64-android-params
      defconfig:
        - defconfig
        - allnoconfig

  kbuild-clang-17-arm64-android-big_endian:
    <<: *kbuild-clang-17-arm64-android-job
    params:
      <<: *kbuild-clang-17-arm64-android-params
      fragments:
       - CONFIG_CPU_BIG_ENDIAN=y

  kbuild-clang-17-arm64-android-randomize:
    <<: *kbuild-clang-17-arm64-android-job
    params:
      <<: *kbuild-clang-17-arm64-android-params
      fragments:
       - CONFIG_RANDOMIZE_BASE=y

  kbuild-clang-17-arm64-kselftest:
    <<: *kbuild-clang-17-arm64-job
    params:
      <<: *kbuild-clang-17-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'kselftest'
    rules: &kbuild-kselftest-rules
      tree:
        - 'kselftest'
      fragments:
        - kselftest

  kbuild-clang-17-arm64-mainline: &kbuild-clang-17-arm64-mainline-job
    <<: *kbuild-clang-17-arm64-job
    rules:
      tree:
        - 'mainline'
        - 'next'
        - 'sashal-next'

  kbuild-clang-17-arm64-mainline-64K_PAGES:
    <<: *kbuild-clang-17-arm64-mainline-job
    params:
      <<: *kbuild-clang-17-arm64-params
      fragments:
        - 'CONFIG_ARM64_64K_PAGES=y'

  kbuild-clang-17-arm-mainline: &kbuild-clang-17-arm-mainline-job
    <<: *kbuild-clang-17-arm-job
    params:
      <<: *kbuild-clang-17-arm-params
    rules:
      tree:
        - 'mainline'
        - 'next'
        - 'sashal-next'

  kbuild-clang-17-arm-mainline-allnoconfig:
    <<: *kbuild-clang-17-arm-mainline-job
    params:
      <<: *kbuild-clang-17-arm-params
      defconfig:
        - multi_v7_defconfig
        - allnoconfig

  kbuild-clang-17-arm-mainline-aspeed_g5:
    <<: *kbuild-clang-17-arm-mainline-job
    params:
      <<: *kbuild-clang-17-arm-params
      defconfig:
        - aspeed_g5_defconfig

  kbuild-clang-17-arm-mainline-multi_v5:
    <<: *kbuild-clang-17-arm-mainline-job
    params:
      <<: *kbuild-clang-17-arm-params
      defconfig:
        - multi_v5_defconfig

  kbuild-clang-17-i386: &kbuild-clang-17-i386-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}clang-17:x86-kselftest-kernelci
    params: &kbuild-clang-17-i386-params
      arch: i386
      compiler: clang-17
      defconfig: i386_defconfig

  kbuild-clang-17-i386-allnoconfig:
    <<: *kbuild-clang-17-i386-job
    params:
      <<: *kbuild-clang-17-i386-params
      defconfig:
        - i386_defconfig
        - allnoconfig
    rules:
      tree:
      - 'mainline'
      - 'next'
      - 'sashal-next'

  kbuild-clang-17-i386-android-allnoconfig:
    <<: *kbuild-clang-17-i386-job
    params:
      <<: *kbuild-clang-17-i386-params
      defconfig:
        - i386_defconfig
        - allnoconfig
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-clang-17-riscv: &kbuild-clang-17-riscv-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}clang-17:riscv64-kselftest-kernelci
    params: &kbuild-clang-17-riscv-params
      arch: riscv
      compiler: clang-17
      cross_compile: 'riscv64-linux-gnu-'
      defconfig: defconfig

  kbuild-clang-17-riscv-defconfig:
    <<: *kbuild-clang-17-riscv-job
    params:
      <<: *kbuild-clang-17-riscv-params
      defconfig:
        - defconfig
        - allnoconfig
    rules:
      min_version:
        version: 4
        patchlevel: 19
      tree:
      - 'next'
      - 'sashal-next'

  kbuild-clang-17-riscv-android-defconfig:
    <<: *kbuild-clang-17-riscv-job
    params:
      <<: *kbuild-clang-17-riscv-params
      defconfig:
        - defconfig
        - allnoconfig
      kselftest: disable
    rules: &kbuild-riscv-android-rules
      min_version:
        version: 4
        patchlevel: 19
      tree:
      - 'android'

  kbuild-clang-17-riscv-smp:
    <<: *kbuild-clang-17-riscv-job
    params:
      <<: *kbuild-clang-17-riscv-params
      fragments:
        - 'CONFIG_SMP=n'
    rules:
      tree:
      - 'riscv'

  kbuild-clang-17-x86:
    <<: *kbuild-clang-17-x86-job

  kbuild-clang-17-x86-android-allmodconfig:
    <<: *kbuild-clang-17-x86-job
    params:
      <<: *kbuild-clang-17-x86-params
      defconfig:
        - x86_64_defconfig
        - allmodconfig
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-clang-17-x86-allmodconfig:
    <<: *kbuild-clang-17-x86-job
    params:
      <<: *kbuild-clang-17-x86-params
      defconfig:
        - x86_64_defconfig
        - allmodconfig
    rules:
      tree:
      - 'mainline'
      - 'stable-rc'
      - 'stable'

  kbuild-clang-17-x86-allnoconfig:
    <<: *kbuild-clang-17-x86-job
    params:
      <<: *kbuild-clang-17-x86-params
      defconfig:
        - x86_64_defconfig
        - allnoconfig
    rules:
      tree:
      - 'mainline'
      - 'next'
      - 'sashal-next'

  kbuild-clang-17-x86-android-allnoconfig:
    <<: *kbuild-clang-17-x86-job
    params:
      <<: *kbuild-clang-17-x86-params
      defconfig:
        - x86_64_defconfig
        - allnoconfig
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-clang-17-x86-kselftest:
    <<: *kbuild-clang-17-x86-job
    params:
      <<: *kbuild-clang-17-x86-params
      defconfig:
        - x86_64_defconfig
      fragments:
        - 'kselftest'
        - 'x86-board'
    rules:
      <<: *kbuild-kselftest-rules

  # Default config and build only job
  kbuild-gcc-12-arc-build-only: &kbuild-gcc-12-arc-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:arc-kselftest-kernelci
    params: &kbuild-gcc-12-arc-params
      arch: arc
      compiler: gcc-12
      cross_compile: 'arc-elf32-'
      defconfig: haps_hs_smp_defconfig
    rules: *build-only-trees-rules

  kbuild-gcc-12-arc-hs_smp_defconfig-allnoconfig:
    <<: *kbuild-gcc-12-arc-job
    params:
      <<: *kbuild-gcc-12-arc-params
      defconfig:
        - haps_hs_smp_defconfig
        - allnoconfig

  kbuild-gcc-12-arc-haps_hs_smp_defconfig:
    <<: *kbuild-gcc-12-arc-job
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'
      - 'next'
      - 'sashal-next'

  kbuild-gcc-12-arc-mainline: &kbuild-gcc-12-arc-mainline-job
    <<: *kbuild-gcc-12-arc-job
    params: &kbuild-gcc-12-arc-mainline-params
      <<: *kbuild-gcc-12-arc-params
      fragments:
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'
    rules:
      min_version:
        version: 4
        patchlevel: 10
      tree:
        - 'mainline'

  kbuild-gcc-12-arc-mainline-allnoconfig:
    <<: *kbuild-gcc-12-arc-mainline-job
    params:
      <<: *kbuild-gcc-12-arc-mainline-params
      defconfig:
        - haps_hs_smp_defconfig
        - allnoconfig

  kbuild-gcc-12-arm: &kbuild-gcc-12-arm-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:arm-kselftest-kernelci
    params: &kbuild-gcc-12-arm-params
      arch: arm
      compiler: gcc-12
      cross_compile: 'arm-linux-gnueabihf-'
      defconfig: multi_v7_defconfig

  kbuild-gcc-12-arm-allnoconfig: &kbuild-gcc-12-arm-allnoconfig-job
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig:
        - multi_v7_defconfig
        - allnoconfig
    rules:
      tree:
        - 'next'
        - 'sashal-next'

  kbuild-gcc-12-arm-BIG_ENDIAN:
    <<: *kbuild-gcc-12-arm-allnoconfig-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_CPU_BIG_ENDIAN=y'

  kbuild-gcc-12-arm-SMP:
    <<: *kbuild-gcc-12-arm-allnoconfig-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_SMP=n'

  kbuild-gcc-12-arm-EFI:
    <<: *kbuild-gcc-12-arm-allnoconfig-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_EFI=y'
        - 'CONFIG_ARM_LPAE=y'

  kbuild-gcc-12-arm-THUMB2:
    <<: *kbuild-gcc-12-arm-allnoconfig-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_THUMB2_KERNEL=y'

  kbuild-gcc-12-arm-android: &kbuild-gcc-12-arm-android-job
    <<: *kbuild-gcc-12-arm-job
    params: &kbuild-gcc-12-arm-android-params
      <<: *kbuild-gcc-12-arm-params
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-gcc-12-arm-android-allmodconfig:
    <<: *kbuild-gcc-12-arm-android-job
    params:
      <<: *kbuild-gcc-12-arm-android-params
      defconfig:
        - imx_v6_v7_defconfig
        - allmodconfig

  kbuild-gcc-12-arm-android-imx_v6_v7_defconfig:
    <<: *kbuild-gcc-12-arm-android-job
    params:
      <<: *kbuild-gcc-12-arm-android-params
      defconfig: imx_v6_v7_defconfig

  kbuild-gcc-12-arm-android-multi_v5_defconfig:
    <<: *kbuild-gcc-12-arm-android-job
    params:
      <<: *kbuild-gcc-12-arm-android-params
      defconfig: multi_v5_defconfig

  kbuild-gcc-12-arm-android-omap2plus_defconfig:
    <<: *kbuild-gcc-12-arm-android-job
    params:
      <<: *kbuild-gcc-12-arm-android-params
      defconfig: omap2plus_defconfig

  kbuild-gcc-12-arm-android-vexpress_defconfig:
    <<: *kbuild-gcc-12-arm-android-job
    params:
      <<: *kbuild-gcc-12-arm-android-params
      defconfig: vexpress_defconfig

  # Default config and build only job
  kbuild-gcc-12-arm-build-only:
    <<: *kbuild-gcc-12-arm-job
    rules: *build-only-trees-rules

  kbuild-gcc-12-arm-imx_v6_v7_defconfig:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig: imx_v6_v7_defconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-arm-kselftest:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'kselftest'
    rules:
      <<: *kbuild-kselftest-rules

  kbuild-gcc-12-arm-mainline: &kbuild-gcc-12-arm-mainline-job
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'
    rules:
      tree:
        - 'mainline'

  kbuild-gcc-12-arm-mainline-allnoconfig:
    <<: *kbuild-gcc-12-arm-mainline-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig:
        - multi_v7_defconfig
        - allnoconfig
      fragments:
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'

  kbuild-gcc-12-arm-mainline-BIG_ENDIAN:
    <<: *kbuild-gcc-12-arm-mainline-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_CPU_BIG_ENDIAN=y'
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'

  kbuild-gcc-12-arm-mainline-EFI:
    <<: *kbuild-gcc-12-arm-mainline-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_EFI=y'
        - 'CONFIG_ARM_LPAE=y'
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'

  kbuild-gcc-12-arm-mainline-SMP:
    <<: *kbuild-gcc-12-arm-mainline-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_SMP=n'
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'

  kbuild-gcc-12-arm-mainline-THUMB2:
    <<: *kbuild-gcc-12-arm-mainline-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
        - 'CONFIG_THUMB2_KERNEL=y'
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'

  kbuild-gcc-12-arm-mfd:
    <<: *kbuild-gcc-12-arm-job
    rules:
      tree:
      - 'lee-mfd'

  kbuild-gcc-12-arm-multi_v5_defconfig:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig: multi_v5_defconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-arm-multi_v7_defconfig:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig: multi_v7_defconfig
    rules:
      tree:
      - 'chrome-platform'
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-arm-omap1_defconfig:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig: omap1_defconfig
    rules:
      tree:
      - 'omap'

  kbuild-gcc-12-arm-omap2plus_defconfig:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig: omap2plus_defconfig
    rules:
      tree:
      - 'kernelci'
      - 'omap'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-arm-preempt_rt:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      fragments:
       - 'preempt_rt'
      defconfig: multi_v7_defconfig
    rules:
      tree:
      - 'stable-rt'

  kbuild-gcc-12-arm-vexpress_defconfig:
    <<: *kbuild-gcc-12-arm-job
    params:
      <<: *kbuild-gcc-12-arm-params
      defconfig: vexpress_defconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-arm64: *kbuild-gcc-12-arm64-job

  kbuild-gcc-12-arm64-allnoconfig:
    <<: *kbuild-gcc-12-arm64-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      defconfig:
        - defconfig
        - allnoconfig
    rules:
      tree:
      - 'arm64'
      - 'next'
      - 'sashal-next'

  kbuild-gcc-12-arm64-android: &kbuild-gcc-12-arm64-android-job
    <<: *kbuild-gcc-12-arm64-job
    params: &kbuild-gcc-12-arm64-android-params
      <<: *kbuild-gcc-12-arm64-params
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-gcc-12-arm64-android-allmodconfig:
    <<: *kbuild-gcc-12-arm64-android-job
    params:
      <<: *kbuild-gcc-12-arm64-android-params
      defconfig:
        - defconfig
        - allmodconfig

  kbuild-gcc-12-arm64-android-allnoconfig:
    <<: *kbuild-gcc-12-arm64-android-job
    params:
      <<: *kbuild-gcc-12-arm64-android-params
      defconfig:
        - defconfig
        - allnoconfig

  kbuild-gcc-12-arm64-android-big_endian:
    <<: *kbuild-gcc-12-arm64-android-job
    params:
      <<: *kbuild-gcc-12-arm64-android-params
      fragments:
       - CONFIG_CPU_BIG_ENDIAN=y

  kbuild-gcc-12-arm64-android-randomize:
    <<: *kbuild-gcc-12-arm64-android-job
    params:
      <<: *kbuild-gcc-12-arm64-android-params
      fragments:
       - CONFIG_RANDOMIZE_BASE=y

  kbuild-gcc-12-arm64-16k_pages: &kbuild-gcc-12-arm64-16k_pages-job
    <<: *kbuild-gcc-12-arm64-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'CONFIG_ARM64_16K_PAGES=y'
    rules:
      tree:
      - 'next'
      - 'sashal-next'

  kbuild-gcc-12-arm64-64k_pages:
    <<: *kbuild-gcc-12-arm64-16k_pages-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'CONFIG_ARM64_64K_PAGES=y'

  kbuild-gcc-12-arm64-big_endian:
    <<: *kbuild-gcc-12-arm64-16k_pages-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'CONFIG_CPU_BIG_ENDIAN=y'

  kbuild-gcc-12-arm64-randomize:
    <<: *kbuild-gcc-12-arm64-16k_pages-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'CONFIG_RANDOMIZE_BASE=y'

  kbuild-gcc-12-arm64-kselftest-16k_pages:
    <<: *kbuild-gcc-12-arm64-16k_pages-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'kselftest'

  # Default config and build only job
  kbuild-gcc-12-arm64-build-only:
    <<: *kbuild-gcc-12-arm64-job
    rules: *build-only-trees-rules

  kbuild-gcc-12-arm64-chrome-platform:
    <<: *kbuild-gcc-12-arm64-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
       - 'arm64-chromebook'
    rules:
      tree:
      - 'chrome-platform'
      - 'mediatek'

  kbuild-gcc-12-arm64-chromebook-kcidebug:
    <<: *kbuild-gcc-12-arm64-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      cross_compile_compat: 'arm-linux-gnueabihf-'
      fragments:
        - arm64-chromebook
        - kcidebug
        - lab-setup

  kbuild-gcc-12-arm64-dtbscheck:
    <<: *kbuild-gcc-12-arm64-job
    kind: job
    params:
      <<: *kbuild-gcc-12-arm64-params
      dtbs_check: true
    kcidb_test_suite: dtbs_check

  kbuild-gcc-12-arm64-kselftest:
    <<: *kbuild-gcc-12-arm64-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'kselftest'
    rules:
      <<: *kbuild-kselftest-rules

  kbuild-gcc-12-arm64-mainline: &kbuild-gcc-12-arm64-mainline-job
    <<: *kbuild-gcc-12-arm64-job
    params: &kbuild-gcc-12-arm64-mainline-params
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'
    rules:
      tree:
        - 'mainline'

  kbuild-gcc-12-arm64-mainline-allnoconfig:
    <<: *kbuild-gcc-12-arm64-mainline-job
    params:
      <<: *kbuild-gcc-12-arm64-mainline-params
      defconfig:
        - defconfig
        - allnoconfig

  kbuild-gcc-12-arm64-mainline-big_endian:
    <<: *kbuild-gcc-12-arm64-mainline-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
        - 'arm64-chromebook'
        - 'CONFIG_CPU_BIG_ENDIAN=y'
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'

  kbuild-gcc-12-arm64-mfd:
    <<: *kbuild-gcc-12-arm64-job
    rules:
      tree:
      - 'lee-mfd'

  kbuild-gcc-12-arm64-preempt_rt:
    <<: *kbuild-gcc-12-arm64-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
       - 'preempt_rt'
      defconfig: defconfig
    rules:
      tree:
      - 'stable-rt'

  kbuild-gcc-12-arm64-preempt_rt_chromebook:
    <<: *kbuild-gcc-12-arm64-job
    params:
      <<: *kbuild-gcc-12-arm64-params
      fragments:
       - 'arm64-chromebook'
       - 'preempt_rt'
      defconfig: defconfig
    rules:
      tree:
      - 'stable-rt'

  kbuild-gcc-12-i386: &kbuild-gcc-12-i386-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:x86-kselftest-kernelci
    params: &kbuild-gcc-12-i386-params
      arch: i386
      compiler: gcc-12
      defconfig: i386_defconfig

  kbuild-clang-17-i386-allmodconfig:
    <<: *kbuild-clang-17-i386-job
    params:
      <<: *kbuild-clang-17-i386-params
      defconfig:
        - i386_defconfig
        - allmodconfig
      fragments:
        - 'CONFIG_FRAME_WARN=2048'
    rules:
      tree:
      - 'mainline'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-i386-allnoconfig:
    <<: *kbuild-gcc-12-i386-job
    params:
      <<: *kbuild-gcc-12-i386-params
      defconfig: allnoconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'
      - 'next'
      - 'sashal-next'

  kbuild-gcc-12-i386-android-allnoconfig:
    <<: *kbuild-gcc-12-i386-job
    params:
      <<: *kbuild-gcc-12-i386-params
      defconfig:
        - i386_defconfig
        - allnoconfig
      kselftest: disable
    rules:
      tree:
      - 'android'

  # Default config and build only job
  kbuild-gcc-12-i386-build-only:
    <<: *kbuild-gcc-12-i386-job
    rules: *build-only-trees-rules

  kbuild-gcc-12-i386-kselftest:
    <<: *kbuild-gcc-12-i386-job
    params:
      <<: *kbuild-gcc-12-i386-params
      fragments:
        - 'kselftest'
    rules:
      <<: *kbuild-kselftest-rules

  kbuild-gcc-12-i386-mainline: &kbuild-gcc-12-i386-mainline-job
    <<: *kbuild-gcc-12-i386-job
    params: &kbuild-gcc-12-i386-mainline-params
      <<: *kbuild-gcc-12-i386-params
      fragments:
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'
    rules:
      tree:
        - 'mainline'

  kbuild-gcc-12-i386-mainline-allnoconfig:
    <<: *kbuild-gcc-12-i386-mainline-job
    params:
      <<: *kbuild-gcc-12-i386-mainline-params
      defconfig:
        - defconfig
        - allnoconfig

  kbuild-gcc-12-i386-mfd:
    <<: *kbuild-gcc-12-i386-job
    rules:
      tree:
      - 'lee-mfd'

  kbuild-gcc-12-i386-tinyconfig:
    <<: *kbuild-gcc-12-i386-job
    params:
      <<: *kbuild-gcc-12-i386-params
      defconfig: tinyconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-mips-32r2el_defconfig: &kbuild-gcc-12-mips-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:mips-kselftest-kernelci
    params: &kbuild-gcc-12-mips-params
      arch: mips
      compiler: gcc-12
      cross_compile: 'mips-linux-gnu-'
      defconfig: 32r2el_defconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'
      - 'next'
      - 'sashal-next'

  kbuild-gcc-12-mips-allnoconfig:
    <<: *kbuild-gcc-12-mips-job
    params:
      <<: *kbuild-gcc-12-mips-params
      defconfig:
        - 32r2el_defconfig
        - allnoconfig
    rules:
      tree:
        - 'next'
        - 'sashal-next'

  # Default config and build only job
  kbuild-gcc-12-mips-build-only:
    <<: *kbuild-gcc-12-mips-job
    rules: *build-only-trees-rules

  kbuild-gcc-12-mips-mainline: &kbuild-gcc-12-mips-mainline-job
    <<: *kbuild-gcc-12-mips-job
    params: &kbuild-gcc-12-mips-mainline-params
      <<: *kbuild-gcc-12-mips-params
      fragments:
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'
    rules:
      tree:
        - 'mainline'

  kbuild-gcc-12-mips-mainline-allnoconfig:
    <<: *kbuild-gcc-12-mips-mainline-job
    params:
      <<: *kbuild-gcc-12-mips-mainline-params
      defconfig:
        - 32r2el_defconfig
        - allnoconfig

  kbuild-gcc-12-riscv: &kbuild-gcc-12-riscv-job
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:riscv64-kselftest-kernelci
    params: &kbuild-gcc-12-riscv-params
      arch: riscv
      compiler: gcc-12
      cross_compile: 'riscv64-linux-gnu-'
      defconfig: defconfig

  kbuild-gcc-12-riscv-android-defconfig:
    <<: *kbuild-gcc-12-riscv-job
    params:
      <<: *kbuild-gcc-12-riscv-params
      defconfig:
        - defconfig
        - allnoconfig
    rules:
      <<: *kbuild-riscv-android-rules

  # Default config and build only job
  kbuild-gcc-12-riscv-build-only:
    <<: *kbuild-gcc-12-riscv-job
    rules: *build-only-trees-rules

  kbuild-gcc-12-riscv-mainline: &kbuild-gcc-12-riscv-mainline-job
    <<: *kbuild-gcc-12-riscv-job
    params: &kbuild-gcc-12-riscv-mainline-params
      <<: *kbuild-gcc-12-riscv-params
      fragments:
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'
    rules:
      min_version:
        version: 4
        patchlevel: 15
      tree:
        - 'mainline'

  kbuild-gcc-12-riscv-mainline-allnoconfig:
    <<: *kbuild-gcc-12-riscv-mainline-job
    params:
      <<: *kbuild-gcc-12-riscv-mainline-params
      defconfig:
      - defconfig
      - allnoconfig

  kbuild-gcc-12-riscv-mfd:
    <<: *kbuild-gcc-12-riscv-job
    rules:
      tree:
      - 'lee-mfd'

  kbuild-gcc-12-riscv-nommu_k210_defconfig:
    <<: *kbuild-gcc-12-riscv-job
    params:
      <<: *kbuild-gcc-12-riscv-params
      defconfig: nommu_k210_defconfig
    rules:
      min_version:
        version: 5
        patchlevel: 10
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-riscv-smp:
    <<: *kbuild-gcc-12-riscv-job
    params:
      <<: *kbuild-gcc-12-riscv-params
      fragments:
        - 'CONFIG_SMP=n'
    rules:
      tree:
      - 'riscv'

  kbuild-gcc-12-um:
    <<: *kbuild-job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:x86-kselftest-kernelci
    params:
      arch: um
      compiler: gcc-12
      defconfig: defconfig
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-gcc-12-x86:
    <<: *kbuild-gcc-12-x86-job
    params:
      <<: *kbuild-gcc-12-x86-params
      fragments:
        - 'lab-setup'
        - 'x86-board'
        - 'kselftest'

  kbuild-gcc-12-x86-allnoconfig:
    <<: *kbuild-gcc-12-x86-job
    params:
      <<: *kbuild-gcc-12-x86-params
      defconfig: allnoconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  kbuild-gcc-12-x86-android-allmodconfig: &kbuild-gcc-12-x86-android-allmodconfig-job
    <<: *kbuild-gcc-12-x86-job
    params: &kbuild-gcc-12-x86-android-params
      <<: *kbuild-gcc-12-x86-params
      defconfig:
        - x86_64_defconfig
        - allmodconfig
      kselftest: disable
    rules:
      tree:
      - 'android'

  kbuild-gcc-12-x86-android-allnoconfig:
    <<: *kbuild-gcc-12-x86-android-allmodconfig-job
    params:
      <<: *kbuild-gcc-12-x86-android-params
      defconfig:
        - x86_64_defconfig
        - allnoconfig

  # Default config and build only job
  kbuild-gcc-12-x86-build-only:
    <<: *kbuild-gcc-12-x86-job
    rules: *build-only-trees-rules

  kbuild-gcc-12-x86-kcidebug:
    <<: *kbuild-gcc-12-i386-job
    params:
      <<: *kbuild-gcc-12-i386-params
      defconfig: defconfig
      fragments:
        - kcidebug
        - x86-board
    rules:
      tree:
      - '!android'

  kbuild-gcc-12-x86-kselftest:
    <<: *kbuild-gcc-12-x86-job
    params:
      <<: *kbuild-gcc-12-x86-params
      fragments:
        - 'kselftest'
        - 'x86-board'
    rules:
      <<: *kbuild-kselftest-rules

  kbuild-gcc-12-x86-mainline: &kbuild-gcc-12-x86-mainline-job
    <<: *kbuild-gcc-12-x86-job
    params: &kbuild-gcc-12-x86-mainline-params
      <<: *kbuild-gcc-12-x86-params
      fragments:
        - 'debug'
        - 'kselftest'
        - 'tinyconfig'
        - 'x86-board'
    rules:
      tree:
        - 'mainline'

  kbuild-gcc-12-x86-mainline-allnoconfig:
    <<: *kbuild-gcc-12-x86-mainline-job
    params:
      <<: *kbuild-gcc-12-x86-mainline-params
      defconfig:
        - x86_64_defconfig
        - allnoconfig

  kbuild-gcc-12-x86-next: &kbuild-gcc-12-x86-next-job
    <<: *kbuild-gcc-12-x86-job
    params: &kbuild-gcc-12-x86-next-params
      <<: *kbuild-gcc-12-x86-params
      fragments:
        - 'kselftest'
        - 'x86-board'
    rules:
      tree:
        - 'next'
        - 'sashal-next'

  kbuild-gcc-12-x86-next-allnoconfig:
    <<: *kbuild-gcc-12-x86-next-job
    params:
      <<: *kbuild-gcc-12-x86-next-params
      defconfig:
        - x86_64_defconfig
        - allnoconfig
      fragments:
        - 'x86-board'

  kbuild-gcc-12-x86-mediatek:
    <<: *kbuild-gcc-12-x86-job
    params:
      <<: *kbuild-gcc-12-x86-params
      fragments:
       - 'x86-board'
    rules:
      tree:
      - 'mediatek'

  kbuild-gcc-12-x86-mfd:
    <<: *kbuild-gcc-12-x86-job
    rules:
      tree:
      - 'lee-mfd'

  kbuild-gcc-12-x86-preempt_rt:
    <<: *kbuild-gcc-12-x86-job
    params:
      <<: *kbuild-gcc-12-x86-params
      fragments:
       - 'preempt_rt'
      defconfig: defconfig
    rules:
      tree:
      - 'stable-rt'

  kbuild-gcc-12-x86-preempt_rt_x86_board:
    <<: *kbuild-gcc-12-x86-job
    params:
      <<: *kbuild-gcc-12-x86-params
      fragments:
       - 'preempt_rt'
       - 'x86-board'
      defconfig: defconfig
    rules:
      tree:
      - 'stable-rt'

  kbuild-gcc-12-x86-tinyconfig:
    <<: *kbuild-gcc-12-x86-job
    params:
      <<: *kbuild-gcc-12-x86-params
      defconfig: tinyconfig
    rules:
      tree:
      - 'kernelci'
      - 'stable-rc'
      - 'stable'

  # Named so it sorts before all the actual kselftests, we need to
  # specify a kselftest suite for YAML validation.
  kselftest-aaa: &kselftest-job
    template: generic.jinja2
    kind: job
    params: &kselftest-params
      test_method: kselftest
      boot_commands: nfs
      nfsroot: 'https://storage.kernelci.org/images/rootfs/debian/bookworm-kselftest/20250117.0/{debarch}'
      job_timeout: 10
    rules: &kselftest-rules
      tree:
        - mainline
        - next
        - stable-rc
        - stable
    kcidb_test_suite: kselftest.aaa

  kselftest-arm64:
    <<: *kselftest-job
    template: generic.jinja2
    kind: job
    params:
      <<: *kselftest-params
      collections: arm64
    kcidb_test_suite: kselftest.arm64

  kselftest-cpufreq:
    <<: *kselftest-job
    template: generic.jinja2
    kind: job
    params:
      <<: *kselftest-params
      collections: cpufreq
    kcidb_test_suite: kselftest.cpufreq

  kselftest-cpufreq-hibernate:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: cpufreq
      env: 'KSELFTEST_MAIN_SH_ARGS="-t hibernate_rtc"'
    rules:
      <<: *kselftest-rules
      min_version:
        version: 6
        patchlevel: 12
    kcidb_test_suite: kselftest.cpufreq.hibernate

  kselftest-cpufreq-suspend:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: cpufreq
      env: 'KSELFTEST_MAIN_SH_ARGS="-t suspend_rtc"'
    rules:
      <<: *kselftest-rules
      min_version:
        version: 6
        patchlevel: 12
    kcidb_test_suite: kselftest.cpufreq.suspend

  kselftest-devices-exist:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      test_method: kselftest-platform-parameters
      collections: devices/exist
      env: "KSELFTEST_TEST_DEV_EXIST_PY_ARGS=--reference-dir=/opt/platform-test-parameters-main/kselftest/devices/exist/"
    rules:
      tree:
        - collabora-next:for-kernelci
    kcidb_test_suite: kselftest.devices-exist

  kselftest-devices-probe:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: devices/probe
      env: "KSELFTEST_TEST_DISCOVERABLE_DEVICES_PY_ARGS=--boards-dir=/opt/platform-test-parameters/kselftest/test_discoverable_devices/boards/"
    rules:
      <<: *kselftest-rules
      min_version:
        version: 6
        patchlevel: 11
    kcidb_test_suite: kselftest.devices-probe

  kselftest-dmabuf-heaps:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: dmabuf-heaps
    kcidb_test_suite: kselftest.dmabuf-heaps

  kselftest-dt:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: dt
    rules:
      <<: *kselftest-rules
      min_version:
        version: 6
        patchlevel: 7
    kcidb_test_suite: kselftest.dt

  kselftest-exec:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: exec
    kcidb_test_suite: kselftest.exec

  kselftest-iommu:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: iommu
    kcidb_test_suite: kselftest.iommu

  kselftest-kvm:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: kvm
    kcidb_test_suite: kselftest.kvm

  kselftest-net:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: net
      job_timeout: 300
      skipfile: https://storage.kernelci.org/skipfile-net.yaml
    kcidb_test_suite: kselftest.net

  kselftest-timers:
    <<: *kselftest-job
    params:
      <<: *kselftest-params
      collections: timers
    kcidb_test_suite: kselftest.timers

  kunit: &kunit-job
    template: kunit.jinja2
    kind: job
    image: ghcr.io/kernelci/{image_prefix}gcc-12:x86-kunit-kernelci
    kcidb_test_suite: kunit

  kunit-x86_64:
    <<: *kunit-job
    params:
      arch: x86_64

  kver:
    template: kver.jinja2
    kind: test
    image: kernelci/{image_prefix}kernelci
    kcidb_test_suite: kernelci_kver

  ltp-cap-bounds:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "cap_bounds"

  ltp-cpuhotplug:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "cpuhotplug"

  ltp-crypto:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "crypto"
    rules:
      fragments:
        - 'crypto'
        - '!kselftest'

  ltp-dio:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "dio"

  ltp-fcntl-locktests:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "fcntl-locktests"

  ltp-filecaps:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "filecaps"

  ltp-fsx:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "fsx"

  ltp-hugetlb:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "hugetlb"

  ltp-ima:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "ima"
    rules:
      fragments:
        - 'ima'
        - '!kselftest'

  ltp-io:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "io"

  ltp-ipc:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "ipc"

  ltp-mm:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "mm"
      job_timeout: 30

  ltp-pty:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "pty"
      job_timeout: 25

  ltp-sched:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "sched"

  ltp-smoketest:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "smoketest"

  ltp-syscalls:
    <<: *ltp-job
    params:
      <<: *ltp-params
      tst_cmdfiles: "syscalls"
      job_timeout: 120

  ltp-timers:
    <<: *ltp-job
    params:
      <<: *ltp-params
      grp_test: "TMR"
      job_timeout: 30

  ltp-timers_qemu:
    <<: *ltp-job
    base_name: ltp-timers
    params:
      <<: *ltp-params
      grp_test: "TMR"
      job_timeout: 30
    rules:
      defconfig:
        - 'defconfig'
      fragments:
        - '!kselftest'

  rt-tests: &rt-tests
    template: rt-tests.jinja2
    kind: job
    params: &rt-tests-params
      boot_commands: nfs
      nfsroot: 'https://storage.kernelci.org/images/rootfs/debian/bookworm-rt/20240806.0/{debarch}'
    kcidb_test_suite: rt-tests
    rules:
      fragments:
        - preempt_rt

  rt-tests-cyclicdeadline:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'cyclicdeadline'
    kcidb_test_suite: rt-tests.cyclicdeadline

  rt-tests-cyclictest:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'cyclictest'
    kcidb_test_suite: rt-tests.cyclictest

  rt-tests-pi-stress:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'pi-stress'
    kcidb_test_suite: rt-tests.pi-params

  rt-tests-pmqtest:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'pmqtest'
    kcidb_test_suite: rt-tests.pmqtest

  rt-tests-ptsematest:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'ptsematest'
    kcidb_test_suite: rt-tests.ptsematest

  rt-tests-rt-migrate-test:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'rt-migrate-test'
    kcidb_test_suite: rt-tests.rt-migrate-test

  rt-tests-rtla-osnoise:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'rtla-osnoise'
      tst_group: 'rtla'
    kcidb_test_suite: rt-tests.rtla-osnoise

  rt-tests-rtla-timerlat:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'rtla-timerlat'
      tst_group: 'rtla'
    kcidb_test_suite: rt-tests.rtla-timerlat

  rt-tests-signaltest:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'signaltest'
    kcidb_test_suite: rt-tests.signaltest

  rt-tests-sigwaittest:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'sigwaittest'
    kcidb_test_suite: rt-tests.sigwaittest

  rt-tests-svsematest:
    <<: *rt-tests
    params:
      <<: *rt-tests-params
      tst_cmd: 'svsematest'
    kcidb_test_suite: rt-tests.svsematest

  # amd64-only temporary
  sleep:
    template: generic.jinja2
    kind: job
    params:
      test_method: sleep
      boot_commands: nfs
      nfsroot: http://storage.kernelci.org/images/rootfs/debian/bullseye/20240129.0/{debarch}
      sleep_params: mem freeze
    kcidb_test_suite: kernelci_sleep

  h26forge-debian:
    template: generic.jinja2
    kind: job
    params:
      test_method: h26forge-debian
      boot_commands: nfs
      nfsroot: 'https://storage.kernelci.org/images/rootfs/debian/bookworm-gst-h26forge/20250117.0/{debarch}/'
    rules:
      tree:
        - media
    kcidb_test_suite: h26forge.debian

trees:

  amlogic:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/amlogic/linux.git"

  android:
    url: 'https://android.googlesource.com/kernel/common'

  ardb:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/ardb/linux.git"

  arm64:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/arm64/linux.git"

  arnd:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/arnd/playground.git"

  broonie-misc:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/misc.git"

  broonie-regmap:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/regmap.git"

  broonie-regulator:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/regulator.git"

  broonie-sound:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/sound.git"

  broonie-spi:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/broonie/spi.git"

  chrome-platform:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/chrome-platform/linux.git"

  cip:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/cip/linux-cip.git"

  clk:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/clk/linux.git"

  collabora-chromeos-kernel:
    url: 'https://gitlab.collabora.com/google/chromeos-kernel.git'

  collabora-next:
    url: 'https://gitlab.collabora.com/kernel/collabora-next.git'

  efi:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/efi/efi.git"

  kernelci:
    url: "https://github.com/kernelci/linux.git"

  khilman:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/khilman/linux.git"

  krzysztof:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/krzk/linux.git"

  kselftest:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/shuah/linux-kselftest.git'

  lee-backlight:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/lee/backlight.git"

  lee-mfd:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/lee/mfd.git"

  linusw:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/linusw/linux-gpio.git"

  mainline:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git'

  media:
    url: 'https://git.linuxtv.org/media.git'

  mediatek:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/mediatek/linux.git'

  net-next:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net-next.git"

  next:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git'

  omap:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/khilman/linux-omap.git"

  padovan:
    url: "https://github.com/padovan/linux.git"

  pm:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm.git"

  qcom:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux.git"

  renesas:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/geert/renesas-devel.git"

  riscv:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/riscv/linux.git"

  robh:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/robh/linux.git"

  rppt:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/rppt/memblock.git"

  sashal-next:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/sashal/linus-next.git"

  soc:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/soc/soc.git"

  stable:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git'

  stable-rc:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable-rc.git'

  stable-rt:
    url: 'https://git.kernel.org/pub/scm/linux/kernel/git/rt/linux-stable-rt.git'

  tegra:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/tegra/linux.git"

  thermal:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/thermal/linux.git"

  tip:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/tip/tip.git"

  ulfh:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/ulfh/mmc.git"

  vireshk:
    url: "https://git.kernel.org/pub/scm/linux/kernel/git/vireshk/linux.git"

platforms:

  aaeon-UPN-EHLX4RE-A10-0864: *x86_64-device

  bcm2711-rpi-4-b:
    <<: *arm64-device
    mach: broadcom
    dtb: dtbs/broadcom/bcm2711-rpi-4-b.dtb
    compatible: ['raspberrypi,4-model-b', 'brcm,bcm2711']

  # No job is being scheduled on these board as its infrastructure errors need to be fixed first.
  bcm2836-rpi-2-b:
    <<: *arm-device
    mach: broadcom
    dtb: dtbs/bcm2836-rpi-2-b.dtb
    compatible: ['raspberrypi,2-model-b', 'brcm,bcm2836']

  beaglebone-black:
    <<: *arm-device
    mach: omap
    dtb: dtbs/am335x-boneblack.dtb
    compatible: ['ti,am335x-bone-black', 'ti,am335x-bone', 'ti,am33xx']

  docker:

  imx6dl-udoo:
    <<: *arm-device
    mach: imx
    dtb: dtbs/imx6dl-udoo.dtb
    compatible: ['udoo,imx6dl-udoo', 'fsl,imx6dl']

  imx6q-sabrelite:
    <<: *arm-device
    mach: imx
    dtb: dtbs/imx6q-sabrelite.dtb
    compatible: ['fsl,imx6q-sabrelite', 'fsl,imx6q']

  imx6q-udoo:
    <<: *arm-device
    mach: imx
    dtb: dtbs/imx6q-udoo.dtb
    compatible: ['udoo,imx6q-udoo', 'fsl,imx6q']

  imx8mp-evk:
    <<: *arm64-device
    mach: imx
    dtb: dtbs/freescale/imx8mp-evk.dtb
    compatible: ["fsl,imx8mp-evk", "fsl,imx8mp"]

  imx8mp-verdin-nonwifi-dahlia:
    <<: *arm64-device
    mach: imx
    dtb: dtbs/freescale/imx8mp-verdin-nonwifi-dahlia.dtb
    compatible: ['toradex,verdin-imx8mp-nonwifi-dahlia',
                 'toradex,verdin-imx8mp-nonwifi',
                 'toradex,verdin-imx8mp',
                 'fsl,imx8mp']
  juno:
    <<: *arm64-device
    mach: vexpress
    dtb: dtbs/arm/juno.dtb
    compatible: ['arm,juno', 'arm,vexpress']


  kubernetes:

  meson-g12b-a311d-libretech-cc:
    <<: *arm64-device
    mach: amlogic
    dtb: dtbs/amlogic/meson-g12b-a311d-libretech-cc.dtb
    compatible: ['libretech,aml-a311d-cc', 'amlogic,a311d', 'amlogic,g12b']

  meson-g12b-a311d-khadas-vim3:
    <<: *arm64-device
    mach: amlogic
    dtb: dtbs/amlogic/meson-g12b-a311d-khadas-vim3.dtb
    compatible: ['khadas,vim3', 'amlogic,a311d', 'amlogic,g12b']

  meson-gxl-s905x-libretech-cc:
    <<: *arm64-device
    mach: amlogic
    dtb: dtbs/amlogic/meson-gxl-s905x-libretech-cc.dtb
    compatible: ['libretech,aml-s905x-cc', 'amlogic,s905x', 'amlogic,meson-gxl']

  meson-sm1-s905d3-libretech-cc:
    <<: *arm64-device
    mach: amlogic
    dtb: dtbs/amlogic/meson-sm1-s905d3-libretech-cc.dtb
    compatible: ['libretech,aml-s905d3-cc', 'amlogic,sm1']

  # No job is being scheduled on this board as its infrastructure errors need to be fixed first.
  minnowboard-turbot-E3826: *x86_64-device

  mt8365-genio-350-evk:
    <<: *arm64-device
    mach: mediatek
    dtb: dtbs/mediatek/mt8365-evk.dtb
    compatible: ['mediatek,mt8365-evk', 'mediatek,mt8365']

  mt8390-genio-700-evk:
    <<: *arm64-device
    mach: mediatek
    dtb: dtbs/mediatek/mt8390-genio-700-evk.dtb
    compatible: ['mediatek,mt8390-evk', 'mediatek,mt8390', 'mediatek,mt8188']

  mt8395-genio-1200-evk:
    <<: *arm64-device
    mach: mediatek
    dtb: dtbs/mediatek/mt8395-genio-1200-evk.dtb
    compatible: ['mediatek,mt8395-evk', 'mediatek,mt8395', 'mediatek,mt8195']

  odroid-xu3:
    <<: *arm-device
    mach: samsung
    dtb: dtbs/exynos5422-odroidxu3.dtb
    compatible: ['hardkernel,odroid-xu3', 'samsung,exynos5800', 'samsung,exynos5']

  qcs6490-rb3gen2:
    <<: *arm64-device
    boot_method: fastboot
    mach: qcom
    dtb: dtbs/qcom/qcs6490-rb3gen2.dtb
    compatible: ['qcom,qcs6490-rb3gen2', 'qcom,qcm6490']

  qemu: &qemu-device
    base_name: qemu
    arch: x86_64
    boot_method: qemu
    mach: qemu
    context:
      arch: x86_64
      cpu: qemu64
      guestfs_interface: ide

  qemu-x86: *qemu-device

  rk3288-rock2-square:
    <<: *arm-device
    mach: rockchip
    dtb: dtbs/rk3288-rock2-square.dtb
    compatible: ['radxa,rock2-square', 'rockchip,rk3288']

  rk3288-veyron-jaq:
    <<: *arm-device
    boot_method: depthcharge
    mach: rockchip
    dtb: dtbs/rk3288-veyron-jaq.dtb
    compatible: ['google,veyron-jaq-rev5', 'google,veyron-jaq-rev4']

  rk3399-gru-kevin:
    <<: *arm64-device
    boot_method: depthcharge
    mach: rockchip
    dtb: dtbs/rockchip/rk3399-gru-kevin.dtb
    compatible: ['google,kevin-rev15', 'google,kevin-rev14']

  rk3399-rock-pc:
    <<: *arm64-device
    mach: rockchip
    dtb: dtbs/rockchip/rk3399-roc-pc.dtb
    compatible: ['firefly,roc-rk3399-pc', 'rockchip,rk3399']

  rk3399-rock-pi-4b:
    <<: *arm64-device
    mach: rockchip
    dtb: dtbs/rockchip/rk3399-rock-pi-4b.dtb
    compatible: ['radxa,rockpi4b', 'radxa,rockpi4', 'rockchip,rk3399']

  rk3588-rock-5b:
    <<: *arm64-device
    mach: rockchip
    dtb: dtbs/rockchip/rk3588-rock-5b.dtb
    compatible: ['radxa,rock-5b', 'rockchip,rk3588']

  shell:

  stm32mp157a-dhcor-avenger96:
    <<: *arm-device
    mach: st
    dtb: dtbs/stm32mp157a-dhcor-avenger96.dtb
    compatible: ['arrow,stm32mp157a-avenger96', 'dh,stm32mp157a-dhcor-som',
                     'st,stm32mp157']

  sun7i-a20-cubieboard2:
    <<: *arm-device
    mach: allwinner
    dtb: dtbs/sun7i-a20-cubieboard2.dtb
    compatible: ['cubietech,cubieboard2', 'allwinner,sun7i-a20']

  sun50i-a64-pine64-plus:
    <<: *arm64-device
    mach: allwinner
    dtb: dtbs/allwinner/sun50i-a64-pine64-plus.dtb
    compatible: ['pine64,pine64-plus', 'allwinner,sun50i-a64']

  sun50i-h5-libretech-all-h3-cc:
    <<: *arm64-device
    mach: allwinner
    dtb: dtbs/allwinner/sun50i-h5-libretech-all-h3-cc.dtb
    compatible: ['libretech,all-h3-cc-h5', 'allwinner,sun50i-h5']

  sun50i-h6-pine-h64:
    <<: *arm64-device
    mach: allwinner
    dtb: dtbs/allwinner/sun50i-h6-pine-h64.dtb
    compatible: ['pine64,pine-h64', 'allwinner,sun50i-h6']


scheduler:

  - job: baseline-arm
    event: &kbuild-gcc-12-arm-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm
    runtime: &lava-collabora-runtime
      type: lava
      name: lava-collabora
    platforms: &collabora-arm-platforms
      - imx6q-sabrelite
      - odroid-xu3
      - rk3288-rock2-square
      - rk3288-veyron-jaq

  - job: baseline-arm-baylibre
    event: *kbuild-gcc-12-arm-node-event
    runtime: &lava-baylibre-runtime
      type: lava
      name: lava-baylibre
    platforms:
      - sun7i-a20-cubieboard2

  - job: baseline-arm-broonie
    event: *kbuild-gcc-12-arm-node-event
    runtime: &lava-broonie-runtime
      type: lava
      name: lava-broonie
    platforms: &lava-broonie-arm
      - beaglebone-black
      - imx6dl-udoo
      - imx6q-udoo
      - stm32mp157a-dhcor-avenger96

  - job: baseline-arm-mfd
    event:
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm-mfd
    runtime: *lava-collabora-runtime
    platforms:
      - imx6q-sabrelite

  - job: baseline-arm64
    event: &kbuild-gcc-12-arm64-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm64
    runtime: *lava-collabora-runtime
    platforms: &collabora-arm64-platforms
      - bcm2711-rpi-4-b
      - meson-g12b-a311d-khadas-vim3
      - mt8365-genio-350-evk
      - mt8390-genio-700-evk
      - mt8395-genio-1200-evk
      - rk3399-gru-kevin
      - rk3399-rock-pi-4b
      - rk3588-rock-5b
      - sun50i-h6-pine-h64

  - job: baseline-arm64-android
    event:
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm64-android
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: baseline-arm64-broonie
    event: *kbuild-gcc-12-arm64-node-event
    runtime:
      type: lava
      name: lava-broonie
    platforms: &lava-broonie-arm64
      - bcm2711-rpi-4-b
      - imx8mp-evk
      - imx8mp-verdin-nonwifi-dahlia
      - juno
      - meson-g12b-a311d-libretech-cc
      - meson-gxl-s905x-libretech-cc
      - meson-sm1-s905d3-libretech-cc
      - rk3399-roc-pc
      - sun50i-a64-pine64-plus
      - sun50i-h5-libretech-all-h3-cc

  - job: baseline-arm64-kcidebug-mediatek
    event: &kbuild-gcc-12-arm64-chromebook-kcidebug-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm64-chromebook-kcidebug
    runtime: *lava-collabora-runtime
    platforms:
      - mt8183-kukui-jacuzzi-juniper-sku16
      - mt8186-corsola-steelix-sku131072
      - mt8192-asurada-spherion-r0
      - mt8195-cherry-tomato-r2

  - job: baseline-arm64-kcidebug-qualcomm
    event: *kbuild-gcc-12-arm64-chromebook-kcidebug-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - sc7180-trogdor-kingoftown
      - sc7180-trogdor-lazor-limozeen

  - job: baseline-arm64-mfd
    event:
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm64-mfd
    runtime: *lava-collabora-runtime
    platforms:
      - bcm2711-rpi-4-b

  - job: baseline-arm64-qualcomm
    event: *kbuild-gcc-12-arm64-node-event
    runtime:
      type: lava
      name: lava-qualcomm
    platforms:
      - bcm2711-rpi-4-b
      - qcs6490-rb3gen2

  - job: baseline-x86
    event: &kbuild-gcc-12-x86-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-x86
    runtime: *lava-collabora-runtime
    platforms: &collabora-x86-platforms
      - qemu-x86
      - aaeon-UPN-EHLX4RE-A10-0864

  - job: baseline-x86-baylibre
    event: *kbuild-gcc-12-x86-node-event
    runtime: *lava-baylibre-runtime
    platforms:
      - qemu

  - job: baseline-x86-cip
    event: *kbuild-gcc-12-x86-node-event
    runtime:
      type: lava
      name: lava-cip
    platforms:
      - qemu

  - job: baseline-x86-kcidebug-amd
    event: &kbuild-gcc-12-x86-kcidebug-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-x86-kcidebug
    runtime: *lava-collabora-runtime
    platforms:
      - acer-R721T-grunt
      - acer-cp514-3wh-r0qs-guybrush
      - asus-CM1400CXA-dalboz
      - dell-latitude-3445-7520c-skyrim
      - hp-14-db0003na-grunt
      - hp-11A-G6-EE-grunt
      - hp-14b-na0052xx-zork
      - hp-x360-14a-cb0001xx-zork
      - lenovo-TPad-C13-Yoga-zork

  - job: baseline-x86-kcidebug-intel
    event: *kbuild-gcc-12-x86-kcidebug-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - acer-cb317-1h-c3z6-dedede
      - acer-cbv514-1h-34uz-brya
      - acer-chromebox-cxi4-puff
      - acer-cp514-2h-1130g7-volteer
      - acer-cp514-2h-1160g7-volteer
      - asus-C433TA-AJ0005-rammus
      - asus-C436FA-Flip-hatch
      - asus-C523NA-A20057-coral
      - dell-latitude-5300-8145U-arcada
      - dell-latitude-5400-4305U-sarien
      - dell-latitude-5400-8665U-sarien
      - hp-x360-14-G1-sona
      - hp-x360-12b-ca0010nr-n4020-octopus
      - aaeon-UPN-EHLX4RE-A10-0864

  - job: baseline-x86-mfd
    event:
      <<: *node-event-kbuild
      name: kbuild-gcc-12-x86-mfd
    runtime: *lava-collabora-runtime
    platforms:
      - qemu-x86
      - aaeon-UPN-EHLX4RE-A10-0864

  - job: kbuild-clang-17-arm-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-android
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-android-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-android-imx_v6_v7_defconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-android-multi_v5_defconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-android-omap2plus_defconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-android-vexpress_defconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-android
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-android-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-android-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-android-big_endian
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-android-randomize
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-kselftest
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-mainline
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm64-mainline-64K_PAGES
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-mainline
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-mainline-aspeed_g5
    <<: *build-k8s-all

  - job: kbuild-clang-17-arm-mainline-multi_v5
    <<: *build-k8s-all

  - job: kbuild-clang-17-i386-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-i386-android-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-riscv-defconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-riscv-android-defconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-riscv-smp
    <<: *build-k8s-all

  - job: kbuild-clang-17-x86
    <<: *build-k8s-all

  - job: kbuild-clang-17-x86-android-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-x86-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-x86-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-x86-android-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-x86-kselftest
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arc-build-only
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arc-hs_smp_defconfig-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arc-haps_hs_smp_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arc-mainline
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arc-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-BIG_ENDIAN
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-SMP
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-EFI
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-THUMB2
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-android
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-android-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-android-multi_v5_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-android-imx_v6_v7_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-android-omap2plus_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-android-vexpress_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-build-only
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-imx_v6_v7_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-kselftest
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-mainline
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-mainline-BIG_ENDIAN
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-mainline-EFI
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-mainline-SMP
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-mainline-THUMB2
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-mfd
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-multi_v5_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-multi_v7_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-omap1_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-omap2plus_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-preempt_rt
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm-vexpress_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-android
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-android-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-android-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-android-big_endian
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-android-randomize
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-16k_pages
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-64k_pages
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-big_endian
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-randomize
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-kselftest-16k_pages
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-build-only
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-chrome-platform
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-chromebook-kcidebug
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-dtbscheck
    <<: *build-k8s-all
    rules:
      tree:
        - next:master
        - sashal-next

# Example of same job name to apply to different tree/branch
#  - job: kbuild-gcc-12-arm64-dtbscheck
#    <<: *build-k8s-all
#    rules:
#      tree:
#        - kernelci:staging-next

  - job: kbuild-gcc-12-arm64-kselftest
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-mainline
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-mainline-big_endian
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-mfd
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-preempt_rt
    <<: *build-k8s-all

  - job: kbuild-gcc-12-arm64-preempt_rt_chromebook
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386
    <<: *build-k8s-all

  - job: kbuild-clang-17-i386-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-android-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-build-only
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-tinyconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-kselftest
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-mainline
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-i386-mfd
    <<: *build-k8s-all

  - job: kbuild-gcc-12-mips-32r2el_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-mips-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-mips-build-only
    <<: *build-k8s-all
    rules:
      tree:
        - '!efi'

  - job: kbuild-gcc-12-mips-mainline
    <<: *build-k8s-all

  - job: kbuild-gcc-12-mips-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-riscv
    <<: *build-k8s-all
    rules:
      tree:
        - '!efi'

  - job: kbuild-gcc-12-riscv-android-defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-riscv-build-only
    <<: *build-k8s-all
    rules:
      tree:
        - '!efi'

  - job: kbuild-gcc-12-riscv-mainline
    <<: *build-k8s-all

  - job: kbuild-gcc-12-riscv-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-riscv-mfd
    <<: *build-k8s-all

  - job: kbuild-gcc-12-riscv-nommu_k210_defconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-riscv-smp
    <<: *build-k8s-all

  - job: kbuild-gcc-12-um
    <<: *build-k8s-all
    rules:
      tree:
        - '!efi'

  - job: kbuild-gcc-12-x86
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-clang-17-x86-android-allmodconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-android-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-build-only
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-kcidebug
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-kselftest
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-mainline
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-mainline-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-next
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-next-allnoconfig
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-mediatek
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-mfd
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-preempt_rt
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-preempt_rt_x86_board
    <<: *build-k8s-all

  - job: kbuild-gcc-12-x86-tinyconfig
    <<: *build-k8s-all

  - job: kselftest-arm64
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-broonie-runtime
    platforms: *lava-broonie-arm64

  - job: kselftest-dt
    event: *kbuild-gcc-12-arm-node-event
    runtime: *lava-broonie-runtime
    platforms: *lava-broonie-arm

  - job: kselftest-dt
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-broonie-runtime
    platforms: *lava-broonie-arm64

  - job: kselftest-dt
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - bcm2711-rpi-4-b
      - mt8390-genio-700-evk
      - mt8395-genio-1200-evk

  - job: kselftest-kvm
    event:
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm64-kselftest
    runtime: *lava-broonie-runtime
    platforms: *lava-broonie-arm64

#  - job: kselftest-net
#    event: *kbuild-gcc-12-x86-node-event
#    runtime: *lava-collabora-runtime
#    platforms:
#      - acer-cb317-1h-c3z6-dedede
#      - aaeon-UPN-EHLX4RE-A10-0864

#  - job: kselftest-net
#    event: *kbuild-gcc-12-arm64-node-event
#    runtime: *lava-collabora-runtime
#    platforms:
#      - meson-g12b-a311d-khadas-vim3
#      - rk3399-gru-kevin
#      - rk3399-rock-pi-4b
#      - sun50i-h6-pine-h64

  - job: kselftest-timers
    event: *kbuild-gcc-12-arm-node-event
    runtime: *lava-broonie-runtime
    platforms:
      - beaglebone-black
      - stm32mp157a-dhcor-avenger96

  - job: kselftest-timers
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-broonie-runtime
    platforms:
      - bcm2711-rpi-4-b
      - meson-gxl-s905x-libretech-cc
      - sun50i-h5-libretech-all-h3-cc

  - job: kselftest-cpufreq
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - mt8390-genio-700-evk
      - mt8395-genio-1200-evk

  - job: kselftest-cpufreq-suspend
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - mt8390-genio-700-evk

#  - job: kunit
#    event: *checkout-event
#    runtime:
#      type: docker

  - job: kunit-x86_64
    event: *checkout-event
    runtime:
      name: k8s-gke-eu-west4

  - job: kver
    event: *checkout-event
    runtime:
      type: shell

  - job: ltp-crypto
    event: *kbuild-gcc-12-arm-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - imx6q-sabrelite

  - job: ltp-dio
    event: *kbuild-gcc-12-arm-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - imx6q-sabrelite

  - job: ltp-fcntl-locktests
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - rk3399-gru-kevin

  - job: ltp-fsx
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - bcm2711-rpi-4-b

  - job: ltp-pty
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - rk3399-gru-kevin

  - job: ltp-smoketest
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - bcm2711-rpi-4-b

  - job: ltp-timers
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - bcm2711-rpi-4-b
      - rk3399-gru-kevin

  - job: ltp-timers_qemu
    event: *kbuild-gcc-12-x86-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - qemu-x86

  - job: rt-tests-cyclicdeadline
    event: &kbuild-gcc-12-arm64-preempt_rt-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm64-preempt_rt
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-cyclicdeadline
    event: &kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm64-preempt_rt_chromebook
    runtime: *lava-collabora-runtime
    platforms: &collabora-arm64-chromebook-platforms
      - mt8183-kukui-jacuzzi-juniper-sku16
      - mt8186-corsola-steelix-sku131072
      - mt8192-asurada-spherion-r0
      - mt8195-cherry-tomato-r2
      - sc7180-trogdor-kingoftown
      - sc7180-trogdor-lazor-limozeen

  - job: rt-tests-cyclicdeadline
    event: &kbuild-gcc-12-x86-preempt_rt-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-x86-preempt_rt
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-cyclicdeadline
    event: &kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-x86-preempt_rt_x86_board
    runtime: *lava-collabora-runtime
    platforms: &collabora-x86-rt-chromebook-platforms
      - acer-cb317-1h-c3z6-dedede
      - acer-cbv514-1h-34uz-brya
      - acer-R721T-grunt
      - acer-cp514-3wh-r0qs-guybrush
      - hp-11A-G6-EE-grunt
      - hp-14b-na0052xx-zork
      - hp-x360-14-G1-sona
      - hp-x360-12b-ca0010nr-n4020-octopus

  - job: rt-tests-cyclicdeadline
    event: &kbuild-gcc-12-arm-preempt_rt-node-event
      <<: *node-event-kbuild
      name: kbuild-gcc-12-arm-preempt_rt
    runtime: *lava-collabora-runtime
    platforms: &collabora-arm-preempt_rt-platforms
      - imx6q-sabrelite

  - job: rt-tests-cyclictest
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-cyclictest
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-cyclictest
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-cyclictest
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-cyclictest
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-pi-stress
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-pi-stress
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-pi-stress
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-pi-stress
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-pi-stress
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-pmqtest
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-pmqtest
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-pmqtest
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-pmqtest
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-pmqtest
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-ptsematest
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-ptsematest
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-ptsematest
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-ptsematest
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-ptsematest
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-rt-migrate-test
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-rt-migrate-test
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-rt-migrate-test
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-rt-migrate-test
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-rt-migrate-test
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-rtla-osnoise
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-rtla-osnoise
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-rtla-osnoise
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-rtla-osnoise
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-rtla-osnoise
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-rtla-timerlat
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-rtla-timerlat
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-rtla-timerlat
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-rtla-timerlat
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-rtla-timerlat
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-signaltest
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-signaltest
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-signaltest
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-signaltest
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-signaltest
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-sigwaittest
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-sigwaittest
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-sigwaittest
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-sigwaittest
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-sigwaittest
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: rt-tests-svsematest
    event: *kbuild-gcc-12-arm64-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-platforms

  - job: rt-tests-svsematest
    event: *kbuild-gcc-12-arm64-preempt_rt_chromebook-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm64-chromebook-platforms

  - job: rt-tests-svsematest
    event: *kbuild-gcc-12-x86-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-platforms

  - job: rt-tests-svsematest
    event: *kbuild-gcc-12-x86-preempt_rt_x86_board-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-x86-rt-chromebook-platforms

  - job: rt-tests-svsematest
    event: *kbuild-gcc-12-arm-preempt_rt-node-event
    runtime: *lava-collabora-runtime
    platforms: *collabora-arm-preempt_rt-platforms

  - job: sleep
    event: *kbuild-gcc-12-x86-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - acer-chromebox-cxi4-puff

  - job: h26forge-debian
    event: *kbuild-gcc-12-arm64-node-event
    runtime: *lava-collabora-runtime
    platforms:
      - rk3399-gru-kevin
      - rk3399-rock-pi-4b

# -----------------------------------------------------------------------------
# Legacy configuration data (still used by trigger service)
#

build_environments:

  gcc-12:
    cc: gcc
    cc_version: 10
    arch_params:
      x86_64:
        name: 'x86'


build_variants:
  variants:
    gcc-12:
      build_environment: gcc-12
      architectures:
        x86_64:
          base_defconfig: 'x86_64_defconfig'
          filters:
            - regex: { defconfig: 'x86_64_defconfig' }
        arm64:
          base_defconfig: 'defconfig'
          filters:
            - regex: { defconfig: 'defconfig' }
        arm:
          base_defconfig: 'multi_v7_defconfig'
          filters:
            - regex: { defconfig: 'multi_v7_defconfig' }


build_configs:

  amlogic:
    tree: amlogic
    branch: 'for-next'

  android_mainline:
    tree: android
    branch: 'android-mainline'

  android_mainline_tracking:
    tree: android
    branch: 'android-mainline-tracking'

  android11-5.4:
    tree: android
    branch: 'android11-5.4'

  android12-5.4:
    tree: android
    branch: 'android12-5.4'

  android12-5.4-lts:
    tree: android
    branch: 'android12-5.4-lts'

  android12-5.10:
    tree: android
    branch: 'android12-5.10'

  android12-5.10-lts:
    tree: android
    branch: 'android12-5.10-lts'

  android13-5.10:
    tree: android
    branch: 'android13-5.10'

  android13-5.10-lts:
    tree: android
    branch: 'android13-5.10-lts'

  android13-5.15:
    tree: android
    branch: 'android13-5.15'

  android13-5.15-lts:
    tree: android
    branch: 'android13-5.15-lts'

  android14-5.15:
    tree: android
    branch: 'android14-5.15'

  android14-5.15-lts:
    tree: android
    branch: 'android14-5.15-lts'

  android14-6.1:
    tree: android
    branch: 'android14-6.1'

  android14-6.1-lts:
    tree: android
    branch: 'android14-6.1-lts'

  android15-6.6:
    tree: android
    branch: 'android15-6.6'

  android15-6.6-lts:
    tree: android
    branch: 'android15-6.6-lts'

  android16-6.12:
    tree: android
    branch: 'android16-6.12'

  ardb:
    tree: ardb
    branch: 'for-kernelci'

  arm64:
    tree: arm64
    branch: 'for-kernelci'

  arnd:
    tree: arnd
    branch: 'to-build'

  broonie-misc:
    tree: broonie-misc
    branch: 'for-kernelci'

  broonie-regmap:
    tree: broonie-regmap
    branch: 'for-next'

  broonie-regmap-fixes:
    tree: broonie-regmap
    branch: 'for-linus'

  broonie-regulator:
    tree: broonie-regulator
    branch: 'for-next'

  broonie-regulator-fixes:
    tree: broonie-regulator
    branch: 'for-linus'

  broonie-sound:
    tree: broonie-sound
    branch: 'for-next'

  broonie-sound-fixes:
    tree: broonie-sound
    branch: 'for-linus'

  broonie-spi:
    tree: broonie-spi
    branch: 'for-next'

  broonie-spi-fixes:
    tree: broonie-spi
    branch: 'for-linus'

  chrome-platform:
    tree: chrome-platform
    branch: 'for-next'

  chrome-platform-firmware:
    tree: chrome-platform
    branch: 'for-firmware-next'

  cip-4.4:
    tree: cip
    branch: 'linux-4.4.y-cip'

  cip-4.4-rt:
    tree: cip
    branch: 'linux-4.4.y-cip-rt'

  cip-4.19:
    tree: cip
    branch: 'linux-4.19.y-cip'

  cip-4.19-rt:
    tree: cip
    branch: 'linux-4.19.y-cip-rt'

  cip-5.10:
    tree: cip
    branch: 'linux-5.10.y-cip'

  cip-5.10-rt:
    tree: cip
    branch: 'linux-5.10.y-cip-rt'

  cip-6.1:
    tree: cip
    branch: 'linux-6.1.y-cip'

  cip-6.1-rt:
    tree: cip
    branch: 'linux-6.1.y-cip-rt'

  clk:
    tree: clk
    branch: 'clk-next'

  collabora-chromeos-kernel_for-kernelci:
    tree: collabora-chromeos-kernel
    branch: 'for-kernelci'

  collabora-next_for-kernelci:
    tree: collabora-next
    branch: 'for-kernelci'

  efi:
    tree: efi
    branch: 'next'

  kernelci_staging-mainline:
    tree: kernelci
    branch: 'staging-mainline'

  kernelci_staging-next:
    tree: kernelci
    branch: 'staging-next'

  kernelci_staging-stable:
    tree: kernelci
    branch: 'staging-stable'

  khilman:
    tree: khilman
    branch: 'to-build'

  krzysztof:
    tree: krzysztof
    branch: 'for-next'

  kselftest_fixes:
    tree: kselftest
    branch: 'fixes'

  kselftest_next:
    tree: kselftest
    branch: 'next'

  lee_backlight:
    tree: lee-backlight
    branch: 'for-backlight-next'

  lee_mfd:
    tree: lee-mfd
    branch: 'for-mfd-next'

  linusw_devel:
    tree: linusw
    branch: 'devel'

  linusw_fixes:
    tree: linusw
    branch: 'fixes'

  linusw_for-next:
    tree: linusw
    branch: 'for-next'

  mainline:
    tree: mainline
    branch: 'master'

  media_fixes:
    tree: media
    branch: 'fixes'

  media_next:
    tree: media
    branch: 'next'

  mediatek_for_next:
    tree: mediatek
    branch: 'for-next'

  net-next:
    tree: net-next
    branch: 'main'

  next_master:
    tree: next
    branch: 'master'

  next_pending-fixes:
    tree: next
    branch: 'pending-fixes'

  omap:
    tree: omap
    branch: 'for-next'

  padovan:
    tree: padovan
    branch: 'for-kernelci'

  pm:
    tree: pm
    branch: 'testing'

  qcom:
    tree: qcom
    branch: 'for-next'

  renesas:
    tree: renesas
    branch: 'master'

  renesas_next:
    tree: renesas
    branch: 'next'

  riscv_fixes:
    tree: riscv
    branch: 'fixes'

  riscv_for-next:
    tree: riscv
    branch: 'for-next'

  robh:
    tree: robh
    branch: 'for-kernelci'

  rppt:
    tree: rppt
    branch: 'for-kernelci'

  sashal-next:
    tree: sashal-next
    branch: 'linus-next'

  soc_fixes:
    tree: soc
    branch: 'arm/fixes'

  soc_for-next:
    tree: soc
    branch: 'for-next'

  stable_5.4:
    tree: stable
    branch: 'linux-5.4.y'

  stable_5.10:
    tree: stable
    branch: 'linux-5.10.y'

  stable_5.15:
    tree: stable
    branch: 'linux-5.15.y'

  stable_6.1:
    tree: stable
    branch: 'linux-6.1.y'

  stable_6.6:
    tree: stable
    branch: 'linux-6.6.y'

  stable_6.12:
    tree: stable
    branch: 'linux-6.12.y'

  stable-rc_5.4: &stable-rc
    tree: stable-rc
    branch: 'linux-5.4.y'

  stable-rc_5.10:
    <<: *stable-rc
    branch: 'linux-5.10.y'

  stable-rc_5.15:
    <<: *stable-rc
    branch: 'linux-5.15.y'

  stable-rc_6.1:
    <<: *stable-rc
    branch: 'linux-6.1.y'

  stable-rc_6.6:
    <<: *stable-rc
    branch: 'linux-6.6.y'

  stable-rc_6.7:
    <<: *stable-rc
    branch: 'linux-6.7.y'

  stable-rc_6.9:
    <<: *stable-rc
    branch: 'linux-6.9.y'

  stable-rc_6.10:
    <<: *stable-rc
    branch: 'linux-6.10.y'

  stable-rc_6.11:
    <<: *stable-rc
    branch: 'linux-6.11.y'

  stable-rc_6.12:
    <<: *stable-rc
    branch: 'linux-6.12.y'

  stable-rc_6.13:
    <<: *stable-rc
    branch: 'linux-6.13.y'

  stable-rt_v4.14-rt:
    tree: stable-rt
    branch: 'v4.14-rt'

  stable-rt_v4.14-rt-next:
    tree: stable-rt
    branch: 'v4.14-rt-next'

  stable-rt_v5.4-rt:
    tree: stable-rt
    branch: 'v5.4-rt'

  stable-rt_v5.10-rt:
    tree: stable-rt
    branch: 'v5.10-rt'

  stable-rt_v5.10-rt-next:
    tree: stable-rt
    branch: 'v5.10-rt-next'

  stable-rt_v5.15-rt:
    tree: stable-rt
    branch: 'v5.15-rt'

  stable-rt_v5.15-rt-next:
    tree: stable-rt
    branch: 'v5.15-rt-next'

  stable-rt_v6.1-rt:
    tree: stable-rt
    branch: 'v6.1-rt'

  stable-rt_v6.1-rt-next:
    tree: stable-rt
    branch: 'v6.1-rt-next'

  stable-rt_v6.6-rt:
    tree: stable-rt
    branch: 'v6.6-rt'

  tegra:
    tree: tegra
    branch: 'for-next'

  thermal:
    tree: thermal
    branch: 'testing'

  tip:
    tree: tip
    branch: 'master'

  ulfh:
    tree: ulfh
    branch: 'next'

  vireshk:
    tree: vireshk
    branch: 'for-kernelci'
